#https://home-assistant.io/components/sensor/

####################################################
#                                                  #
#                   AIRVISUAL                      #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.airvisual/
  - platform: airvisual
    api_key: !secret airvisual_api
    monitored_conditions:
      - us
      - cn
    show_on_map: false
    latitude: !secret latitude
    longitude: !secret longitude

####################################################
#                                                  #
#                 COMMAND LINE                     #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.command_line/
  - platform: command_line
    name: CPU Temperature
    command: "cat /sys/class/thermal/thermal_zone0/temp"
    unit_of_measurement: "Â°C"
    value_template: '{{ value | multiply(0.001) | round(1) }}'

  -  platform: command_line
     name: Installed version
     command: "head -5 /home/homeassistant/.homeassistant/.HA_VERSION"

####################################################
#                                                  #
#                  CPU SPEED                       #
#                                                  #
####################################################   
   
#https://home-assistant.io/components/sensor.cpuspeed/
  - platform: cpuspeed
    name: CPU

####################################################
#                                                  #
#                 CURRENT WEATHER                  #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.yr/
  - platform: yr
    name: Weather
    monitored_conditions:
      - symbol

####################################################
#                                                  #
#               DARK SKY WEATHER                   #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.darksky/
  - platform: darksky
    api_key: !secret darksky
    monitored_conditions:
      - temperature
      - humidity
      - wind_speed
      - uv_index
      - daily_summary
      - summary
      - precip_probability
      - apparent_temperature
      - cloud_cover
      - hourly_summary
      - visibility
      - precip_type
      - apparent_temperature_high
      - apparent_temperature_low
      - precip_accumulation
      - minutely_summary
    update_interval: '00:05'

####################################################
#                                                  #
#                    FAST.COM                      #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.fastdotcom/

  - platform: fastdotcom
    minute: 30

####################################################
#                                                  #
#                   POLLEN.COM                     #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.pollen/
  - platform: pollen
    zip_code: !secret zipcode
    monitored_conditions:
      - allergy_average_forecasted
      - allergy_average_historical
      - allergy_index_today
      - allergy_index_tomorrow
      - allergy_index_yesterday
      - disease_average_forecasted

####################################################
#                                                  #
#                      REST                        #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.rest/
  - platform: rest
    resource: https://pypi.python.org/pypi/homeassistant/json
    name: Latest Version
    value_template: "{{ value_json.info.version }}"
    scan_interval: 3600

####################################################
#                                                  #
#                   SPEEDTEST                      #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.speedtest

  - platform: speedtest
    monitored_conditions:
      - ping
      - download
      - upload

####################################################
#                                                  #
#                 SYSTEM MONITOR                   #
#                                                  #
####################################################

#https://home-assistant.io/components/sensor.systemmonitor/
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /home
      - type: memory_use_percent
      - type: processor_use
      - type: since_last_boot
      - type: network_in
        arg: eth0
      - type: network_out
        arg: eth0
      - type: load_1m
      - type: load_5m
      - type: load_15m

####################################################
#                                                  #
#                     TIME/DATE                    #
#                                                  #
####################################################

#https://www.home-assistant.io/components/sensor.time_date/
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      - 'date_time'
      - 'time_date'
      - 'time_utc'

####################################################
#                                                  #
#                      TEMPLATE                    #
#                                                  #
####################################################

#https://home-assistant.io/components/sensor.template/
  - platform: template
    sensors:

      since_last_boot_templated:
        value_template: >-
          {%- set slb = states.sensor.since_last_boot.state.split(' ') -%}
          {%- set count = slb | length -%}
          {%- set hms = slb[count - 1] -%}
          {%- set hms_trimmed = hms.split('.')[0] -%}
          {%- set hms_split = hms_trimmed.split(':') -%}
          {%- set hours = hms_split[0] | int -%}
          {%- if count == 3 -%}
            {{ slb[0] ~ ' ' ~ slb[1] ~ ' ' }}
          {%- endif -%}
          {%- if hours > 0 -%}
            {%- if hours == 1 -%}
              1 hour
            {%- else -%}
              {{ hours }} hours
            {%- endif -%}
          {%- endif -%}


####################################################
#                                                  #
#           END OF CONFIGURATION FILE              #
#                                                  #
####################################################
